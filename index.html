<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Phả hệ dạng trên–xuống</title>
<script src="https://balkan.app/js/OrgChart.js"></script>
<style>
  html, body {
    margin: 0;
    padding: 0;
    height: 100%;
    overflow: hidden;
    font-family: Arial, sans-serif;
  }

  #tree {
    width: 100%;
    height: 100%;
  }

  .node-text {
    width: 230px;
    text-align: center;
    word-wrap: break-word;
    overflow-wrap: break-word;
    line-height: 1.1;
  }

  .index { font-size: 13px; color: #e60000; }
  .name { font-size: 15px; font-weight: normal; color: #fceb07; }
  .vc { font-size: 14px; color: #ffffff; }

  #popup {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: #fefefe;
    padding: 20px;
    border-radius: 12px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
    display: none;
    z-index: 9999;
    width: 300px;
  }

  #popup h3 { margin-top: 0; text-align: center; }
  #popup input {
    width: 100%;
    padding: 6px;
    margin-bottom: 10px;
    border: 1px solid #ccc;
    border-radius: 6px;
  }

  #popup button {
    margin: 5px;
    padding: 6px 10px;
    border: none;
    border-radius: 6px;
    cursor: pointer;
  }

  #popup .save { background: #4CAF50; color: white; }
  #popup .add-child { background: #2196F3; color: white; }
  #popup .delete { background: #f44336; color: white; }
  #popup .cancel { background: #aaa; color: white; }

  #saveAll {
    position: fixed;
    top: 10px;
    right: 10px;
    padding: 8px 12px;
    background: #009688;
    color: white;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    z-index: 1000;
  }
</style>
</head>
<body>
<div id="tree"></div>
<script>
var nodes = [
  {
    "id": 1,
    "index": "Đời thứ 1",
    "name": "Lưu Chương Vi: 18xx-19xx",
    "VC": "Nguyễn Thị ...: 18xx-19xx"
  },
  {
    "id": 2,
    "pid": 1,
    "index": "Đời thứ 2",
    "name": "Lưu Chương Tục: 1910 - 1975",
    "VC": "Nguyễn Thị Ngân: 1915 - 2009"
  },
  {
    "id": 3,
    "pid": 2,
    "index": "Đời thứ 3",
    "name": "Lưu Chương Thuân: 19xx - 19xx",
    "VC": "Nguyễn Thị Víu: 19xx"
  },
  {
    "id": 4,
    "pid": 2,
    "index": "Đời thứ 3",
    "name": "Lưu Chương Thuấn: 1933 - 1978",
    "VC": "Nguyễn Thị Hến 1933"
  },
  {
    "id": 5,
    "pid": 2,
    "index": "Đời thứ 3",
    "name": "Lưu Chương Phương: 19xx-20xx",
    "VC": "Nguyễn Thị Thái: 19xx"
  },
  {
    "id": 6,
    "pid": 2,
    "index": "Đời thứ 3",
    "name": "Lưu Chương Cáp: 1940",
    "VC": "Lê Thị Tuyết Mai: 1941"
  },
  {
    "id": 7,
    "pid": 3,
    "index": "Đời thứ 4",
    "name": "Lưu Chương Hoan: 19xx - 19xx",
    "VC": "Vợ: ........"
  },
  {
    "id": 8,
    "pid": 3,
    "index": "Đời thứ 4",
    "name": "Lưu Chương Thanh: 19xx",
    "VC": "Vợ: ......."
  },
  {
    "id": 9,
    "pid": 3,
    "index": "Đời thứ 4",
    "name": "Lưu Chương Tuấn: 19xx - 19xx",
    "VC": "Vợ: ....."
  },
  {
    "id": 10,
    "pid": 3,
    "index": "Đời thứ 4",
    "name": "Lưu Chương Lâm: 1964 - 2025",
    "VC": "Nguyễn Thị Hảo: 19xx"
  },
  {
    "id": 11,
    "pid": 3,
    "index": "Đời thứ 4",
    "name": "Lưu Chương Phong: 1966",
    "VC": "Vợ: ....."
  },
  {
    "id": 33,
    "pid": 11,
    "index": "Đời thứ 5",
    "name": "Lưu Chương ..... 19xx",
    "VC": ""
  },
  {
    "id": 36,
    "pid": 11,
    "index": "Đời thứ 5",
    "name": "Lưu Chương .....: 19xx",
    "VC": "Nguyễn Trọng Thuận: 1982"
  },
  {
    "id": 19,
    "pid": 4,
    "index": "Đời thứ 4",
    "name": "Lưu Thị Thanh Thủy : 1963",
    "VC": "Nguyễn Tiến Dũng: 1956"
  },
  {
    "id": 20,
    "pid": 19,
    "index": "Đời thứ 5",
    "name": "Nguyễn Thanh Dung: 1989",
    "VC": ""
  },
  {
    "id": 23,
    "pid": 19,
    "index": "Đời thứ 5",
    "name": "Nguyễn Lưu Ly:1998",
    "VC": ""
  },
  {
    "id": 26,
    "pid": 4,
    "index": "Đời thứ 4",
    "name": "Lưu Thị Thu Hương: 1968",
    "VC": "Phạm Văn Nhận: 1961"
  },
  {
    "id": 27,
    "pid": 26,
    "index": "Đời thứ 5",
    "name": "Phạm Thùy Linh: 1991",
    "VC": ""
  },
  {
    "id": 30,
    "pid": 4,
    "index": "Đời thứ 4",
    "name": "Lưu Thanh Bình : 1972",
    "VC": "Nguyễn Thu Hằng: 1986"
  },
  {
    "id": 31,
    "pid": 30,
    "index": "Đời thứ 5",
    "name": "Lưu An Phú: 2008",
    "VC": ""
  },
  {
    "id": 32,
    "pid": 30,
    "index": "Đời thứ 5",
    "name": "Lưu Châu Giang: 2012",
    "VC": ""
  },
  {
    "id": 40,
    "pid": 7,
    "index": "Đời thứ 5",
    "name": "Lưu Thị ...... : 19xx",
    "VC": ""
  },
  {
    "id": 41,
    "pid": 8,
    "index": "Đời thứ 5",
    "name": "Lưu Chương .... :19xx",
    "VC": ""
  },
  {
    "id": 42,
    "pid": 8,
    "index": "Đời thứ 5",
    "name": "Lưu Chương ..... : 19xx",
    "VC": ""
  },
  {
    "id": 43,
    "pid": 9,
    "index": "Đời thứ 5",
    "name": "Lưu Chương ..... : 19xx",
    "VC": ""
  },
  {
    "id": 44,
    "pid": 9,
    "index": "Đời thứ 5",
    "name": "Lưu Chương ..... : 19xx",
    "VC": ""
  },
  {
    "id": 45,
    "pid": 10,
    "index": "Đời thứ 5",
    "name": "Lưu Thị ..... : 19xx",
    "VC": "Chồng: ......."
  },
  {
    "id": 46,
    "pid": 10,
    "index": "Đời thứ 5",
    "name": "Lưu Thị..... : 19xx",
    "VC": ""
  },
  {
    "id": 47,
    "pid": 10,
    "index": "Đời thứ 5",
    "name": "Lưu Chương ..... : 19xx",
    "VC": ""
  },
  {
    "id": 48,
    "pid": 26,
    "index": "Đời thứ 5",
    "name": "Phạm Thành Long: 1997",
    "VC": ""
  },
  {
    "id": 50,
    "pid": 3,
    "index": "Đời thứ 4",
    "name": "Lưu Chương Khanh : 1969",
    "VC": ""
  },
  {
    "id": 51,
    "pid": 3,
    "index": "Đời thứ 4",
    "name": "Lưu Thị Hằng ..... : 19xx",
    "VC": "Chồng: ......"
  },
  {
    "id": 52,
    "pid": 5,
    "index": "Đời thứ 4",
    "name": "Lưu Chấn Hưng: 1962",
    "VC": "Nguyễn Thị .... : 19xx"
  },
  {
    "id": 53,
    "pid": 5,
    "index": "Đời thứ 4",
    "name": "Lưu Trường Giang : 1974",
    "VC": "Nguyễn Thị ....: 19xx"
  },
  {
    "id": 54,
    "pid": 52,
    "index": "Đời thứ 5",
    "name": "Người mới",
    "VC": ""
  },
  {
    "id": 55,
    "pid": 52,
    "index": "Đời thứ 5",
    "name": "Người mới",
    "VC": ""
  },
  {
    "id": 56,
    "pid": 53,
    "index": "Đời thứ 5",
    "name": "Người mới",
    "VC": ""
  },
  {
    "id": 57,
    "pid": 53,
    "index": "Đời thứ 6",
    "name": "Người mới",
    "VC": ""
  },
  {
    "id": 58,
    "pid": 6,
    "index": "Đời thứ 4",
    "name": "Lưu Mai Hương: 1968",
    "VC": "Nguyễn Huy Dũng: 1964"
  },
  {
    "id": 59,
    "pid": 6,
    "index": "Đời thứ 4",
    "name": "Lưu Mai Anh: 1970",
    "VC": "Đỗ Xuân Lân: 1963"
  },
  {
    "id": 60,
    "pid": 6,
    "index": "Đời thứ 4",
    "name": "Lưu Mai Lan : 1977",
    "VC": "Nguyễn Hữu Thanh: 1976"
  },
  {
    "id": 61,
    "pid": 58,
    "index": "Đời thứ 5",
    "name": "Nguyễn Huy Tuấn Nghĩa: 1991",
    "VC": "Phạm Thị Ngân Hoa: 1993"
  },
  {
    "id": 62,
    "pid": 58,
    "index": "Đời thứ 5",
    "name": "Nguyễn Hà Thu: 1999",
    "VC": ""
  },
  {
    "id": 63,
    "pid": 59,
    "index": "Đời thứ 5",
    "name": "Đỗ Duy Anh: 1998",
    "VC": ""
  },
  {
    "id": 64,
    "pid": 59,
    "index": "Đời thứ 5",
    "name": "Đỗ quang Anh: 2002",
    "VC": ""
  },
  {
    "id": 65,
    "pid": 60,
    "index": "Đời thứ 5",
    "name": "Nguyễn Khánh Linh: 2006",
    "VC": ""
  },
  {
    "id": 66,
    "pid": 60,
    "index": "Đời thứ 5",
    "name": "Nguyễn Minh: 2008",
    "VC": ""
  },
  {
    "id": 67,
    "pid": 2,
    "index": "Đời thứ 3",
    "name": "Lưu Thị Lợi: 19xx - 20xx",
    "VC": "Đỗ Nguyễn Bá: 19xx -20xx"
  },
  {
    "id": 68,
    "pid": 67,
    "index": "Đời thứ 4",
    "name": "Đỗ Khánh Quỳnh: 1973",
    "VC": "Cường: 1963"
  },
  {
    "id": 69,
    "pid": 67,
    "index": "Đời thứ 4",
    "name": "Đỗ Nam Khánh: 1975",
    "VC": "Nguyễn Kim Anh: 19xx"
  },
  {
    "id": 70,
    "pid": 68,
    "index": "Đời thứ 5",
    "name": "Thị Cún: 19xx",
    "VC": ""
  },
  {
    "id": 71,
    "pid": 68,
    "index": "Đời thứ 5",
    "name": "Thị Mi: 19xx",
    "VC": ""
  },
  {
    "id": 72,
    "pid": 69,
    "index": "Đời thứ 5",
    "name": "Người mới",
    "VC": ""
  },
  {
    "id": 73,
    "pid": 69,
    "index": "Đời thứ 5",
    "name": "Người mới",
    "VC": ""
  },
  {
    "id": 74,
    "pid": 2,
    "index": "Đời thứ 3",
    "name": "Lưu Chương Đoàn: 19xx - 19xx",
    "VC": "........... Hà: 19xx"
  },
  {
    "id": 75,
    "pid": 2,
    "index": "Đời thứ 3",
    "name": "Lưu Chương Tụ: 19xx-19xx",
    "VC": "...... Nhâm: 19xx"
  },
  {
    "id": 76,
    "pid": 2,
    "index": "Đời thứ 3",
    "name": "Lưu Thị Hảo: 1953",
    "VC": "Nguyễn Duy Xuyên: 1953"
  },
  {
    "id": 77,
    "pid": 2,
    "index": "Đời thứ 3",
    "name": "Lưu Thị Tâm: 1956",
    "VC": "Nguyễn Văn Ngoạn: 1957"
  },
  {
    "id": 78,
    "pid": 74,
    "index": "Đời thứ 4",
    "name": "Lưu Chương Hùng: 1975",
    "VC": "Vơ: ?"
  },
  {
    "id": 79,
    "pid": 74,
    "index": "Đời thứ 4",
    "name": "Lưu Chương Cường: 19xx",
    "VC": ""
  },
  {
    "id": 80,
    "pid": 78,
    "index": "Đời thứ 5",
    "name": "Người mới",
    "VC": ""
  },
  {
    "id": 81,
    "pid": 78,
    "index": "Đời thứ 5",
    "name": "Người mới",
    "VC": ""
  },
  {
    "id": 82,
    "pid": 75,
    "index": "Đời thứ 4",
    "name": "Lưu Trường Thịnh: 19xx",
    "VC": "Vợ: ..."
  },
  {
    "id": 83,
    "pid": 75,
    "index": "Đời thứ 4",
    "name": "Lưu Hoàng Long",
    "VC": ""
  },
  {
    "id": 84,
    "pid": 82,
    "index": "Đời thứ 5",
    "name": "Người mới",
    "VC": ""
  },
  {
    "id": 85,
    "pid": 82,
    "index": "Đời thứ 5",
    "name": "Người mới",
    "VC": ""
  },
  {
    "id": 86,
    "pid": 76,
    "index": "Đời thứ 4",
    "name": "Nguyễn Thị Quỳnh Nga: 1978",
    "VC": "Trần Văn Dũng: 1978"
  },
  {
    "id": 87,
    "pid": 76,
    "index": "Đời thứ 4",
    "name": "Nguyễ Duy Dũng: 1980",
    "VC": "Nguyễn Thị Dung: 1983"
  },
  {
    "id": 88,
    "pid": 76,
    "index": "Đời thứ 4",
    "name": "Nguyễn Tiến Tùng: 1982",
    "VC": "Nguyễn Thị Ngọc: 1988"
  },
  {
    "id": 89,
    "pid": 86,
    "index": "Đời thứ 5",
    "name": "Trần Đức Anh: 2002",
    "VC": "Trần Thị Hải Yến: 2003"
  },
  {
    "id": 90,
    "pid": 86,
    "index": "Đời thứ 5",
    "name": "Trần Duy Khánh: 2005",
    "VC": ""
  },
  {
    "id": 91,
    "pid": 87,
    "index": "Đời thứ 5",
    "name": "Nguyễn Duy Gia Huy: 2007",
    "VC": ""
  },
  {
    "id": 92,
    "pid": 87,
    "index": "Đời thứ 5",
    "name": "Nguyễn Khánh Linh: 2011",
    "VC": ""
  },
  {
    "id": 93,
    "pid": 88,
    "index": "Đời thứ 5",
    "name": "Nguyễn Ngọc Hạnh Nguyên: 2012",
    "VC": ""
  },
  {
    "id": 94,
    "pid": 88,
    "index": "Đời thứ 5",
    "name": "Nguyễn Ngọc Minh: 2014",
    "VC": ""
  },
  {
    "id": 95,
    "pid": 77,
    "index": "Đời thứ 4",
    "name": " Nguyễn Việt Thắng: 1989",
    "VC": "Nguyễn Thị Huế: 1993"
  },
  {
    "id": 96,
    "pid": 77,
    "index": "Đời thứ 4",
    "name": "Nguyễn Minh Trang: 1991",
    "VC": "Lê Tuấn Anh: 1993"
  },
  {
    "id": 97,
    "pid": 95,
    "index": "Đời thứ 5",
    "name": "Nguyễn Anh Thư: 2018",
    "VC": ""
  },
  {
    "id": 99,
    "pid": 96,
    "index": "Đời thứ 5",
    "name": "Lê Tuệ Anh: 2020",
    "VC": ""
  },
  {
    "id": 100,
    "pid": 96,
    "index": "Đời thứ 5",
    "name": "Lê Đăng Phú: 2024",
    "VC": ""
  },
  {
    "id": 101,
    "pid": 51,
    "index": "Đời thứ 5",
    "name": "Người mới",
    "VC": ""
  },
  {
    "id": 102,
    "pid": 51,
    "index": "Đời thứ 5",
    "name": "Người mới",
    "VC": ""
  },
  {
    "id": 103,
    "pid": 83,
    "index": "Đời thứ 5",
    "name": "Người mới",
    "VC": ""
  },
  {
    "id": 104,
    "pid": 83,
    "index": "Đời thứ 5",
    "name": "Người mới",
    "VC": ""
  },
  {
    "id": 105,
    "pid": 61,
    "index": "Đời thứ 6",
    "name": "Nguyễn Triêu Dương: 2021",
    "VC": ""
  },
  {
    "id": 106,
    "pid": 89,
    "index": "Đời thứ 6",
    "name": "Trần Hoàng Anh: 2023",
    "VC": ""
  },
  {
    "id": 107,
    "pid": 89,
    "index": "Đời thứ 6",
    "name": "Trần Ngọc Cát Tiên: 2025 ",
    "VC": ""
  }
];

OrgChart.templates.centerAlign = Object.assign({}, OrgChart.templates.ana);
OrgChart.templates.centerAlign.size = [240, 70];
OrgChart.templates.centerAlign.minus =
  '<circle cx="15" cy="15" r="7" fill="#ffffff" stroke="#039BE5" stroke-width="1.2"></circle>' +
  '<path d="M10.5,15 h9" stroke="#039BE5" stroke-width="1.6"></path>';
OrgChart.templates.centerAlign.plus =
  '<circle cx="15" cy="15" r="7" fill="#ffffff" stroke="#039BE5" stroke-width="1.2"></circle>' +
  '<path d="M15,10.5 v9 M10.5,15 h9" stroke="#039BE5" stroke-width="1.6"></path>';
OrgChart.templates.centerAlign.link =
  '<path stroke="#808080" stroke-width="1" fill="none" d="{edge}" />';
OrgChart.templates.centerAlign.field_0 =
  '<foreignObject x="5" y="10" width="230" height="20"><div class="node-text index">{val}</div></foreignObject>';
OrgChart.templates.centerAlign.field_1 =
  '<foreignObject x="5" y="28" width="230" height="22"><div class="node-text name">{val}</div></foreignObject>';
OrgChart.templates.centerAlign.field_2 =
  '<foreignObject x="5" y="48" width="230" height="18"><div class="node-text vc">{val}</div></foreignObject>';

var chart = new OrgChart(document.getElementById("tree"), {
  template: "centerAlign",
  enableSearch: true,
  nodeMouseClick: OrgChart.action.expandCollapse,
  collapse: { level: 3 },
  nodes: nodes,
  nodeBinding: { field_0: "index", field_1: "name", field_2: "VC" }
});
</script>
</body>
</html>
